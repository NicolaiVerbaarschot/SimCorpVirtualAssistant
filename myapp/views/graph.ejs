
<canvas id="myChart"></canvas>

<script>

    //////////////// This section exchanges serverside ejs parameters to clientside javascript variables
    var graphLabels = [];

    <% Object.keys(results[0]).forEach(function(attributeName){%>
        graphLabels.push("<%= attributeName.toString() %>");
    <%});%>



    var results = [];
    var resultRecord = [];

    entry = "<%= results %>";
    console.log(entry);

    <%  results.forEach(function(result) { %>
        <% for(var attributeName in result){%>
            resultRecord.push("<%= result[attributeName] %>");
        <%}%>
            results.push(resultRecord);
            resultRecord = [];
    <% }); %>

    var rawDataTemp = results[0];
    var dataTemp = rawDataTemp.slice(2,rawDataTemp.length);
    // END SECTION ////////////////


    // Create Graph
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: graphLabels,
            datasets: [{
                label: 'My First dataset',
                backgroundColor: 'rgb(32,100,121)',
                borderColor: 'rgb(32,100,121)',
                data: dataTemp
            }]
        },

        // Configuration options go here
        options: {}
    });
</script>

